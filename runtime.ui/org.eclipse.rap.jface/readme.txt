Based on code from dev.eclipse.org:/cvsroot/eclipse/org.eclipse.rap.jface, v20100927